var _storage={setFileAccessRequiredWarningDismissed:function(fileAccessRequiredWarningDismissed,callback){"use strict";chrome.storage.sync.set({fileAccessRequiredWarningDismissed:fileAccessRequiredWarningDismissed},callback)},getFileAccessRequiredWarningDismissed:function(callback){"use strict";chrome.storage.sync.get({fileAccessRequiredWarningDismissed:!1},function(items){callback&&callback(items.fileAccessRequiredWarningDismissed)})},setUnselectAfterHighlight:function(unselectAfterHighlight,callback){"use strict";chrome.storage.sync.set({unselectAfterHighlight:unselectAfterHighlight},callback)},getUnselectAfterHighlight:function(callback){"use strict";chrome.storage.sync.get({unselectAfterHighlight:!1},function(items){callback&&callback(items.unselectAfterHighlight)})},getPopupHighlightTextMaxLength:function(callback){"use strict";chrome.storage.sync.get({popupHighlightTextMaxLength:512},function(items){callback(items.popupHighlightTextMaxLength)})},setHighlightBackgroundAlpha:function(alpha,callback){"use strict";chrome.storage.sync.set({highlightBackgroundAlpha:alpha},callback)},getHighlightBackgroundAlpha:function(callback){"use strict";chrome.storage.sync.get({highlightBackgroundAlpha:.8},function(items){callback(items.highlightBackgroundAlpha)})},highlightDefinitions:{create:function(title,className,backgroundColor,textColor){"use strict";return backgroundColor||(backgroundColor="#ff8080"),className||(className=_stringUtils.createUUID({beginWithLetter:!0})),textColor||(textColor="#000000"),{title:title,className:className,inherit_style_color:!1,style:{"background-color":backgroundColor,color:textColor,"font-style":"inherit"}}},getAll:function(callback){"use strict";chrome.storage.sync.get({highlightDefinitions:null,sharedHighlightStyle:{"border-radius":"0.2em","transition-property":"color, background-color, box-shadow","transition-duration":"0.1s, 0.1s, 0.1s","transition-timing-function":"linear, linear, linear",color:"#806060","background-color":"#D3D3D3","font-style":"italic"}},function(items1){return items1.highlightDefinitions?void callback(items1):void chrome.storage.sync.get("defaultHighlightDefinitions",function(items2){items2.defaultHighlightDefinitions||(items2.defaultHighlightDefinitions=[_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_red"),"default-red-aa94e3d5-ab2f-4205-b74e-18ce31c7c0ce","#ff8080","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_orange"),"default-orange-da01945e-1964-4d27-8a6c-3331e1fe7f14","#ffd2AA","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_yellow"),"default-yellow-aaddcf5c-0e41-4f83-8a64-58c91f7c6250","#ffffAA","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_green"),"default-green-c4d41e0a-e40f-4c3f-91ad-2d66481614c2","#AAffAA","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_cyan"),"default-cyan-f88e8827-e652-4d79-a9d9-f6c8b8ec9e2b","#AAffff","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_purple"),"default-purple-c472dcdb-f2b8-41ab-bb1e-2fb293df172a","#FFAAFF","#000000"),_storage.highlightDefinitions.create(chrome.i18n.getMessage("color_title_grey"),"default-grey-da7cb902-89c6-46fe-b0e7-d3b35aaf237a","#777777","#FFFFFF")],chrome.storage.sync.set(items2)),items1.highlightDefinitions=items2.defaultHighlightDefinitions,callback(items1)})})},set:function(newDefinition,callback){"use strict";_storage.highlightDefinitions.getAll(function(result){if(chrome.runtime.lastError)return void(callback&&callback(chrome.runtime.lastError));var index=_storage.highlightDefinitions.getIndex(newDefinition.className,result.highlightDefinitions);-1===index?result.highlightDefinitions.push(newDefinition):result.highlightDefinitions.splice(index,1,newDefinition),chrome.storage.sync.set({highlightDefinitions:result.highlightDefinitions},function(){callback&&callback(chrome.runtime.lastError)})})},remove:function(className,callback){"use strict";_storage.highlightDefinitions.getAll(function(result){if(chrome.runtime.lastError)return void(callback&&callback(chrome.runtime.lastError));var index=_storage.highlightDefinitions.getIndex(className,result.highlightDefinitions);return-1===index?void(callback&&callback({message:"Unable to find defintion with this class name"})):(result.highlightDefinitions.splice(index,1),void chrome.storage.sync.set({highlightDefinitions:result.highlightDefinitions},function(){callback&&callback(chrome.runtime.lastError)}))})},removeAll:function(callback){"use strict";chrome.storage.sync.remove("highlightDefinitions",function(){callback&&callback(chrome.runtime.lastError)})},getIndex:function(className,all){"use strict";for(var i=0;i<all.length;i++)if(all[i].className===className)return i;return-1}}};