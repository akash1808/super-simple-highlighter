var overviewControllers=angular.module("overviewControllers",[]);overviewControllers.controller("DocumentsController",["$scope",function($scope){"use strict";function onInit(tabId,url,title,bgPage){$scope.tabId=tabId,$scope.url=url,$scope.title=title,backgroundPage=bgPage;var match=backgroundPage._database.buildMatchString(url);backgroundPage._database.getCreateDocuments(match,function(err,docs){if(!err){$scope.docs=docs;var messageName,length=docs.length;messageName=0==length?"plural_zero_highlights":1==length?"plural_one_highlight":"plural_other_highlights",$scope.docsCount=chrome.i18n.getMessage(messageName,[docs.length]),$scope.$apply(),isNaN(tabId)||docs.forEach(function(doc){backgroundPage._eventPage.isHighlightInDOM(tabId,doc._id,function(isInDOM){doc.isInDOM=isInDOM,$scope.$apply()})})}})}var backgroundPage;$scope.manifest=chrome.runtime.getManifest(),$scope.onClickPageUrl=function(){chrome.tabs.update($scope.tabId,{active:!0})},$scope.onClickHighlight=function(doc){backgroundPage._eventPage.scrollTo($scope.tabId,doc._id,function(didScroll){didScroll&&chrome.tabs.update($scope.tabId,{active:!0})})};var u=purl(location.href),id=u.param("id"),url=u.param("url"),title=u.param("title");void 0!==url&&chrome.runtime.getBackgroundPage(function(backgroundPage){onInit(parseInt(id),url,title,backgroundPage)})}]);